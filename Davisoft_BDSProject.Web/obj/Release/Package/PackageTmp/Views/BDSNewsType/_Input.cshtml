@using System.Configuration
@using Davisoft_BDSProject.Web.Helpers
@using Davisoft_BDSProject.Web.Models
@using Resources
@model Davisoft_BDSProject.Domain.Entities.BDSNewsType

<div class="form-group">
    <label class="control-label col-md-3">@Utilities.Resource("BDSNewsType_Name", "Name") <span class="required">*</span></label>
    <div class="col-md-8">
        @Html.Bootstrap().TextBoxFor(m => m.Name).HtmlAttributes(new { @class = "form-control" }).ShowValidationMessage(true)
    </div>
</div>
<div class="form-group">
    <label class="control-label col-md-3">@Utilities.Resource("BDSNewsType_Code", "Code") <span class="required">*</span></label>
    <div class="col-md-3">
        @Html.Bootstrap().TextBoxFor(m => m.CodeNewsType).HtmlAttributes(new { @class = "form-control" }).ShowValidationMessage(true)
    </div>
    <label class="control-label col-md-2">@Utilities.Resource("BDSNewsType_Order", "Order") <span class="required">*</span></label>
    <div class="col-md-3">
        @Html.Bootstrap().TextBoxFor(m => m.Order).HtmlAttributes(new { @class = "form-control" }).ShowValidationMessage(true)
    </div>
</div>
<div class="form-group">
    <label class="control-label col-md-3">@Utilities.Resource("BDSNewsType_Description", "Description")</label>
    <div class="col-md-8">
        @Html.Bootstrap().TextAreaFor(m => m.Description).HtmlAttributes(new { @class = "form-control" }).ShowValidationMessage(true)
    </div>
</div>

<div class="form-group">
    <label class="col-md-3 control-label">@Utilities.Resource("BDSNewsType_UrlIcon", "Icon")</label>
    <div class="col-md-8" style="position: relative;">
        <div id="picture">
            @if (Model.UrlIcon != null)
{
    <img style="width: 120px; height:120px;" src="@ConfigurationManager.AppSettings["UrlImage"]@Model.UrlIcon.ToString().Split('_')[0]/@(Model.UrlIcon)" class="img-polaroid user-picture-preview" />
}
else
{
                <img style="max-width: 120px; max-height: 120px;" src="~/Display/img/profile.png" class="img-polaroid user-picture-preview" />
            }

        </div>
    </div>
</div>
<div class="form-group">
    <label class="col-md-3 control-label"></label>
    <div class="col-md-9">
        @Html.Bootstrap().FileFor(m => m.UrlImageFile).HtmlAttributes(new { @class = "form-control hidden" }).ShowValidationMessage(false)
        @Html.Bootstrap().TextBoxFor(m => m.UrlIcon).Readonly(true).HtmlAttributes(new { @class = "form-control" }).Placeholder("Please click to upload logo").ShowValidationMessage(true)
        <script type="text/javascript">
            document.getElementById("UrlIcon").value = "@(Model.UrlIcon)";

        </script>
    </div>
</div>

@Html.HiddenFor(m => m.Active)
@Html.HiddenFor(m => m.ModifiedDate)
@Html.HiddenFor(m => m.CreateDate)
@Html.HiddenFor(m => m.CreateUser)
@Html.HiddenFor(m => m.ModifiedUser)
@Html.Script(
    @<text>
         <script>
             $(document).on('click', '#UrlIcon', function () {
                 $('input[type="File"]').click();
             });
             $(document).on('change', 'input[type="File"]', function () {
                 var upload = $(this);

                 var indicator = upload.next('.selected');
                 if (indicator.length == 0) {
                     indicator = $('<span class="selected"></span>').insertAfter(upload);
                 }

                 if (upload.val() == '') {
                     indicator.html('');
                 } else if (window.FileReader) {
                     $('#UrlIcon').val(upload.val());
                     var reader = new FileReader();
                     reader.onload = function (e) {
                         if (upload[0].files[0].size > 2000000) {
                             $.sticky("@Resource.FileToLarge", { type: 'st-danger' });
                             upload.replaceWith(upload = upload.clone(true));
                         } else {
                             $('#picture').html("<img style='width: 120px; height:120px;' src='" + e.target.result + "' class='img-polaroid user-picture-preview'/>");
                         }
                     };
                     reader.readAsDataURL(upload[0].files[0]);
                 } else {
                     indicator.html("Selected");
                 }
             });
         </script>
    </text>)