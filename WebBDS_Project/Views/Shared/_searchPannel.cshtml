@using WebBDS_Project.Models
@{
    davisoft_bdsprojectEntities db = new davisoft_bdsprojectEntities();

    var States = (from a in db.States join b in db.StateTexts on a.state_id equals b.id where b.language_id == "vi" && a.Status == 1 select new { Id = a.state_id, Name = b.text }).ToList();
}
<link href="~/Template/select2/css/select2.css" rel="stylesheet" />
<script src="~/Template/select2/js/select2.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('.select2').select2();
    });
</script>
<style>
    .select2-selection__arrow > b:before {
        position: absolute;
        right: 12px;
        top: 50%;
        margin-top: -12px;
        font-family: 'FontAwesome';
        content: '\f078';
        font-size: 12px;
        color: #de3039;
    }
    .select2-container--default .select2-selection--single {
        border-radius: 0px;
    }
     .select2-selection {
        height: 34px;
    }
    .select2-selection__arrow > b {
        border-color: initial;
        border-style: none;
    }
  
   .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 34px;
        padding: 0px 12px 0px;
    }
    .selection > .select2-selection {
        height: 34px;
    }
    .select2-container--default .select2-selection--single .select2-selection__arrow {
        height: 32px;
    }
        .select2-container--default .select2-selection--single .select2-selection__arrow b {
            border-color: initial;
            border-style: none;
            border-width: initial;
            height: initial;
            left: inherit;
            margin-left: inherit;
            margin-top: inherit;
            position: inherit;
         
            width: inherit;
        }
      
        .select2-container--default .select2-results__option[aria-selected=true]
        {
            background:none;
            font-weight:700;
        }
          .select2-container--default .select2-results__option--highlighted[aria-selected]
        {
                background: #DE3039;
   
                color: #fff;
        }
          .select2-results__option {
            padding: 8px 12px;          
            line-height: 1;
        }
</style>
<ul class="idTabs">
    <li>
        <a href="#tab1">
            <img src="~/Template/images/icon_1.png" alt="icon">
            <figcaption>Dành cho người tìm việc</figcaption>
        </a>
    </li>
    <li>
        <a href="#tab2">
            <img src="~/Template/images/icon_2.png" alt="icon">
            <figcaption>Dành cho nhà tuyển dụng</figcaption>
        </a>
    </li>
</ul>
<script>
    function searchEmp() {
        var url = '@Url.Action("Search","Default")';

        var params = '?page=1';
        $($('#searchEmp').serializeArray()).each(function (i, item) {
            if (item.value!="") {
                params += "&" + item.name + "=" + item.value;
            }
          

        });
        url += params;
        location.href = url;
    }
</script>
<div class="content_tab">
    <div id="tab1">
        <form id="searchEmp">
            <h4>Tìm tin tuyển dụng nhân viên kinh doanh bất động sản</h4>
            <div class="box_select">

                <fieldset>
                    <div class="grid_3">
                        <select class="select2" style="width: 100%;height: 100%" name="filterWorkingPlace" tabindex="7">
                            <option value="">Chọn tỉnh thành</option>
                            @{
                                foreach (var item in States)
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }
                            }


                        </select>
                    </div>
                    <div class="grid_3">
                        <select class="dropdown" name="filterCareer" tabindex="7">
                            <option value="">Chọn ngành nghề</option>
                            @{
                                foreach (var item in db.BDSCareers.Where(T => T.Active == 1).ToList())
                                {
                                    <option value="@item.ID">@item.Name</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="grid_3">
                        <select class="dropdown" name="filterSalary" tabindex="7">
                            <option value="">Chọn mức lương</option>
                            @{
                                foreach (var item in db.BDSSalaries.Where(T => T.Active == 1).ToList())
                                {
                                    <option value="@item.ID">@item.Name</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="grid_3 omega">
                        <button class="btn_search" type="button" onclick="searchEmp(); return false;"><i class="fa fa-search"></i>TÌM KIẾM</button>
                    </div>
                </fieldset>
            </div>
        </form>
    </div>
    <div id="tab2">
        <form id="searchPer">
            <h4>Tìm tin tuyển dụng nhân viên kinh doanh bất động sản abc</h4>
            <div class="box_select">
                <fieldset>
                    <div class="grid_3">
                        <select class="dropdown" name="filterWorkingPlace" tabindex="7">
                            <option value="">Chọn tỉnh thành</option>
                            @{
                                foreach (var item in States)
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="grid_3">
                        <select class="dropdown" name="filterCareer" tabindex="7">
                            <option value="">Chọn ngành nghề</option>
                            @{
                                foreach (var item in db.BDSCareers.Where(T => T.Active == 1).ToList())
                                {
                                    <option value="@item.ID">@item.Name</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="grid_3">
                        <select class="dropdown" name="filterSalary" tabindex="7">
                            <option value="">Chọn mức lương</option>
                            @{
                                foreach (var item in db.BDSSalaries.Where(T => T.Active == 1).ToList())
                                {
                                    <option value="@item.ID">@item.Name</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="grid_3 omega">
                        <button class="btn_search" type="button" onclick="searchPer(); return false;"><i class="fa fa-search"></i>TÌM KIẾM</button>
                    </div>
                </fieldset>
            </div>
        </form>
    </div>
</div>
<script>
    function searchPer() {
        var url = '@Url.Action("SearchForEmployee","Default")';

        var params = '?page=1';
        $($('#searchPer').serializeArray()).each(function (i, item) {
            if (item.value!="") {
                params += "&" + item.name + "=" + item.value;
            }


        });
        url += params;
        location.href = url;
    }
</script>